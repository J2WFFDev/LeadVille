# LeadVille Bridge - dnsmasq configuration for AP mode
# This file configures DHCP and DNS services for the access point

# Interface to listen on
interface=wlan0

# Don't listen on any other interfaces
bind-interfaces

# DHCP range configuration
# Assign IP addresses in the range 192.168.4.10 to 192.168.4.200
# Lease time: 24 hours
dhcp-range=192.168.4.10,192.168.4.200,255.255.255.0,24h

# Gateway and DNS server (this device)
dhcp-option=3,192.168.4.1    # Gateway
dhcp-option=6,192.168.4.1    # DNS server

# Local domain
domain=bridge.local
local=/bridge.local/

# Captive portal - redirect all DNS queries to local IP
address=/#/192.168.4.1

# Enable DHCP authoritative mode
dhcp-authoritative

# Log DHCP requests
log-dhcp

# Cache size
cache-size=300

# Don't read /etc/hosts
no-hosts

# Don't read upstream servers from /etc/resolv.conf
no-resolv

# Don't poll /etc/resolv.conf for changes
no-poll

# Static host entries
address=/bridge.local/192.168.4.1
address=/leadville.local/192.168.4.1
address=/gateway.local/192.168.4.1

# Expand simple hostnames
expand-hosts

# Never forward A or AAAA queries for plain names
domain-needed

# Never forward reverse lookups for private IP ranges
bogus-priv

# Enable logging
log-queries